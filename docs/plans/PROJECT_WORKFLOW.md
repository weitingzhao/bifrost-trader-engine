# 项目运行工作流

本文档定义本项目的**标准运行工作流**，用于规范开发、评估与迭代。AI Agent 与人工执行计划、更新进展时均应遵循此流程。

---

## 1. 稳定三角（基准文档，仅在变更时修改）

以下三份文档在 **需求不变、硬件/运行环境与架构不变** 的前提下 **保持稳定**，不随执行进度或阶段验收而修改：

| 文档 | 内容 |
|------|------|
| **[REQUIREMENTS.md](REQUIREMENTS.md)** | 产品功能需求（R-M*/R-C*/R-H*/R-B*/R-A* 等） |
| **[ARCHITECTURE.md](ARCHITECTURE.md)** | 系统架构、**运行环境与部署约束**（§2）、组件与阶段映射 |
| **[PLAN_NEXT_STEPS.md](PLAN_NEXT_STEPS.md)** | 分步推进计划（**与需求对比**）：需求与阶段对应、验收标准、Test Case、各阶段步骤与检查方式 |

**何时修改**：仅当 **产品需求** 或 **硬件/运行环境/架构** 发生变更时，由负责人决定并更新上述文档；更新后需保持三者一致（需求↔架构↔阶段对应）。

---

## 2. 执行计划

在稳定三角的基础上，按 **PLAN_NEXT_STEPS** 与各阶段执行计划（如 `plans/phase1-execution-plan.md`、`phase2-execution-plan.md`、`phase3-execution-plan.md`）执行开发与实现，直至本阶段验收条件满足。

- 执行过程中 **不修改** REQUIREMENTS、ARCHITECTURE、PLAN_NEXT_STEPS（除非确认为需求/架构变更）。
- 代码、脚本、配置等按阶段执行计划与验收标准完成。

---

## 3. 结果评估

本阶段执行完成后，进行 **结果评估**：对照 **项目需求**（REQUIREMENTS）与 **分步计划** 中本阶段的验收标准与 Test Case，检查是否满足项目需求。

- 评估结论、Test Case 通过情况、建议下一步等写在 **[阶段评估与下一步](plans/PHASE_ASSESSMENT.md)**。
- **每次阶段评估时** 更新 PHASE_ASSESSMENT 中的：
  - **当前项目进展（阶段完成状态）**（实现/验收状态、实现完成时间、验收完成时间）
  - **项目里程碑时间线**
  - 评估结论与待办

---

## 4. 负责人决策（闭环）

评估完成后，由 **负责人** 根据评估结果给出结论：

| 结论 | 含义 | 下一步 |
|------|------|--------|
| **(a) 可进入下一阶段** | 本阶段验收通过，需求与架构不变 | 回到 **步骤 2（执行计划）**，执行下一阶段 |
| **(b) 调整需求或硬件/架构** | 在评估中决定修改需求或运行环境/架构 | 回到 **步骤 1（稳定三角）**：更新 REQUIREMENTS / ARCHITECTURE / PLAN_NEXT_STEPS，再继续步骤 2 |

- 是否进入下一阶段、是否调整需求或架构，**以负责人决定为准**。
- Agent 与协作者仅更新 PHASE_ASSESSMENT（当前进展、里程碑、评估结论），不擅自修改稳定三角，除非负责人明确要求变更需求或架构。

---

## 流程图（简要）

```
┌─────────────────────────────────────────────────────────────────┐
│ 1. 稳定三角                                                       │
│    REQUIREMENTS / ARCHITECTURE / PLAN_NEXT_STEPS                  │
│    仅在需求或硬件/架构变更时修改                                    │
└────────────────────────────┬────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────┐
│ 2. 执行计划                                                       │
│    按 PLAN_NEXT_STEPS 与阶段执行计划开发，直至本阶段验收条件满足      │
└────────────────────────────┬────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────┐
│ 3. 结果评估                                                       │
│    对照需求与验收标准/Test Case 评估；更新 PHASE_ASSESSMENT         │
│    （当前项目进展、项目里程碑时间线、评估结论）                        │
└────────────────────────────┬────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────┐
│ 4. 负责人决策                                                     │
│    (a) 可进入下一阶段  ──────────────────► 回到 2. 执行计划        │
│    (b) 调整需求/架构   ──────────────────► 回到 1. 稳定三角         │
└─────────────────────────────────────────────────────────────────┘
```

---

## 相关文档

- **[阶段评估与下一步](plans/PHASE_ASSESSMENT.md)**：当前项目进展、项目里程碑时间线、阶段评估结论与待办（每次评估时更新）
- **[分步推进计划](PLAN_NEXT_STEPS.md)**：与需求对比的阶段划分、验收标准、Test Case（稳定，仅在需求/架构变更时调整）
