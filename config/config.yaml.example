# Gamma Scalping Engine MVP - copy to config.yaml and adjust

# IB connection (env overrides: IB_HOST, IB_PORT, IB_CLIENT_ID)
ib:
  host: "127.0.0.1"
  port: 7497
  client_id: 1
  connect_timeout: 60   # seconds; increase for slow/remote connections (default 4)

# Single underlying (MVP: NVDA only)
symbol: "NVDA"

# Structure: 21-35 DTE near ATM straddle only
structure:
  min_dte: 21
  max_dte: 35
  atm_band_pct: 0.03   # |strike - spot| / spot < 3% for "near ATM"

# Hedge: target-position, three gates
hedge:
  delta_threshold_shares: 25   # Gate 1: hedge when |need| >= this
  cooldown_sec: 60             # Gate 3: min seconds between hedges
  min_price_move_pct: 0.2      # Gate 2: min |S - S_last| % to hedge (0 = disabled)
  max_hedge_shares_per_order: 500

# Earnings blackout: no new hedge X days before/after (manual list in YYYY-MM-DD)
earnings:
  blackout_days_before: 3
  blackout_days_after: 1
  dates: []   # e.g. ["2025-02-26", "2025-05-28"]

# Greeks (Black-Scholes)
greeks:
  risk_free_rate: 0.05
  volatility: 0.35   # annual; or use_ib_greeks: true when available

# Risk limits
risk:
  max_daily_hedge_count: 50
  max_position_shares: 2000    # max net stock hedge (long or short)
  max_daily_loss_usd: 5000.0   # circuit breaker: stop hedging if day P&L < -X
  max_net_delta_shares: null   # alert threshold; exceed = force hedge (null = no limit)
  max_spread_pct: null         # pause hedge if bid-ask spread > this % (null = disabled)
  trading_hours_only: true
  paper_trade: true

# Order
order:
  order_type: "market"   # or "limit"

# State space (O,D,M,L,E,S) thresholds
state_space:
  delta:
    epsilon_band: 10
    hedge_threshold: 25
    max_delta_limit: 500
  market:
    vol_window_min: 5
    stale_ts_threshold_ms: 5000
  liquidity:
    wide_spread_pct: 0.1
    extreme_spread_pct: 0.5
  system:
    data_lag_threshold_ms: 1000
  hedge:
    min_hedge_shares: 10
    min_price_move_pct: 0.2
    cooldown_seconds: 60
